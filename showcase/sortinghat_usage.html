<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorting Hat Tour Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .content {
            max-width: 800px;
            margin: 0 auto;
            color: white;
            padding: 40px 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        p {
            line-height: 1.6;
            margin-bottom: 20px;
        }

        /* Sorting Hat Container */
        .sorting-hat-guide {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .sorting-hat-guide:hover {
            transform: scale(1.05);
        }

        .hat-image {
            width: 120px;
            height: 120px;
            object-fit: contain;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        }

        /* Speech Bubble */
        .speech-bubble {
            position: absolute;
            bottom: 130px;
            left: 0;
            background: white;
            color: #333;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            min-width: 280px;
            max-width: 350px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 30px;
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 15px solid white;
        }

        .speech-bubble.active {
            opacity: 1;
            visibility: visible;
        }

        .speech-bubble h3 {
            margin-bottom: 10px;
            color: #722f37;
            font-size: 18px;
        }

        .speech-bubble p {
            margin: 0;
            font-size: 14px;
            line-height: 1.5;
            color: #333;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #722f37;
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 16px;
            line-height: 1;
            transition: background 0.2s ease;
        }

        .close-btn:hover {
            background: #8b3a44;
        }

        /* Call to Action Indicator */
        .cta-pulse {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #ffd700;
            color: #722f37;
            font-size: 12px;
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 12px;
            animation: pulse 2s infinite;
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.6);
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }
        }

        .cta-pulse.hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="content">
        <h1>Welcome to the Magical Experience</h1>
        <p>
            Welcome, dear visitor, to this enchanted page. As you explore the wonders laid before you, 
            know that you are not alone. A wise and ancient guide awaits to assist you on your journey.
        </p>
        <p>
            Look to the bottom left corner, where a mystical companion rests, ready to share its wisdom 
            and guide you through this magical realm. With centuries of knowledge and a touch of whimsy, 
            your guide stands ready to help.
        </p>
        <p>
            Click upon the ancient artifact to awaken its voice and receive guidance for your adventure. 
            The Sorting Hat has seen many seekers before you, and it knows the way forward.
        </p>
    </div>

    <!-- Sorting Hat Tour Guide -->
    <div class="sorting-hat-guide" id="sortingHatGuide">
        <div class="cta-pulse" id="ctaPulse">Click me!</div>
        <img src="../assets/sortinghat_static.png" alt="Sorting Hat" class="hat-image" id="hatImage">
        <div class="speech-bubble" id="speechBubble">
            <button class="close-btn" id="closeBtn" title="Close">&times;</button>
            <h3>ðŸŽ© Welcome, dear visitor!</h3>
            <p>
                Ah, a new soul to guide! I am the Sorting Hat, your mystical tour guide. 
                I've been waiting here in the corner, ready to help you navigate this magical page. 
                Click on me anytime you need guidance or just want to hear a wise word or two!
            </p>
        </div>
    </div>

    <script>
        const hatGuide = document.getElementById('sortingHatGuide');
        const hatImage = document.getElementById('hatImage');
        const speechBubble = document.getElementById('speechBubble');
        const ctaPulse = document.getElementById('ctaPulse');
        const closeBtn = document.getElementById('closeBtn');
        
        let isActive = false;
        let hasBeenClicked = false;

        // Hat click handler
        hatGuide.addEventListener('click', function(e) {
            // Prevent click from propagating to document
            e.stopPropagation();
            
            if (!isActive) {
                activateHat();
            }
        });

        // Close button handler
        closeBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            deactivateHat();
        });

        // Click outside to close
        document.addEventListener('click', function(e) {
            if (isActive && !hatGuide.contains(e.target)) {
                deactivateHat();
            }
        });

        function activateHat() {
            isActive = true;
            hasBeenClicked = true;
            
            // Hide the call-to-action pulse
            ctaPulse.classList.add('hidden');
            
            // Switch to moving/talking hat
            hatImage.src = '../assets/sortinghat_moving.gif';
            
            // Show speech bubble
            speechBubble.classList.add('active');
        }

        function deactivateHat() {
            isActive = false;
            
            // Switch back to static hat
            hatImage.src = '../assets/sortinghat_static.png';
            
            // Hide speech bubble
            speechBubble.classList.remove('active');
        }

        // Optional: Auto-hide call to action pulse after 10 seconds
        setTimeout(() => {
            if (!hasBeenClicked) {
                ctaPulse.style.animation = 'none';
                ctaPulse.style.opacity = '0.7';
            }
        }, 10000);
    </script>
</body>
</html>
